{% extends "base.html" %}

{% block title %}Home - ACI Migrator{% endblock %}
{% block page_title %}Dashboard{% endblock %}

{% block content %}

<!-- Hero Section with Animated Network Topology -->
<div class="relative overflow-hidden bg-gradient-to-br from-primary-600 via-primary-700 to-primary-900 rounded-2xl shadow-2xl mb-8">
    <!-- Animated Network Canvas Background -->
    <canvas id="network-canvas" class="absolute inset-0 w-full h-full"></canvas>

    <div class="relative px-8 py-16 sm:px-12 sm:py-20 z-10">
        <div class="max-w-3xl">
            <h1 class="text-4xl font-bold tracking-tight text-white sm:text-5xl lg:text-6xl animate-fade-in">
                ACI Migrator
            </h1>
            <p class="mt-6 text-xl text-primary-100 max-w-2xl animate-fade-in-delay">
                Professional ACI to EVPN/VXLAN migration analysis tool. Transform your Cisco ACI infrastructure with
                comprehensive planning, automated configuration generation, and expert guidance.
            </p>
            <div class="mt-10 flex items-center gap-x-6 animate-fade-in-delay-2">
                <a href="{{ url_for('analyze') }}" class="rounded-lg bg-white px-6 py-3 text-sm font-semibold text-primary-600 shadow-lg hover:bg-primary-50 transition-all duration-200 hover:shadow-xl hover:scale-105">
                    Start Analyzing
                    <svg class="inline-block ml-2 h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6"/>
                    </svg>
                </a>
                <a href="{{ url_for('help_page') }}" class="text-sm font-semibold leading-6 text-white hover:text-primary-100 transition-colors">
                    Learn more <span aria-hidden="true">â†’</span>
                </a>
            </div>
        </div>
    </div>
</div>

<!-- Fabric-Specific Statistics Section -->
{% if current_fabric and fabric_stats %}
<div class="mb-12">
    <h2 class="text-2xl font-bold text-gray-900 mb-6 flex items-center">
        <span class="h-1 w-8 bg-primary-600 mr-4 rounded-full"></span>
        {{ current_fabric }} Statistics
    </h2>

    <!-- Primary Stats -->
    <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-6">
        <div class="bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-all duration-300">
            <div class="flex items-center justify-between">
                <div>
                    <p class="text-sm font-medium text-gray-600 mb-1">FEX Devices</p>
                    <p class="text-3xl font-bold text-green-600">{{ fabric_stats.fex_count }}</p>
                </div>
                <div class="h-12 w-12 rounded-lg bg-green-100 flex items-center justify-center">
                    <svg class="h-6 w-6 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"/>
                    </svg>
                </div>
            </div>
        </div>

        <div class="bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-all duration-300">
            <div class="flex items-center justify-between">
                <div>
                    <p class="text-sm font-medium text-gray-600 mb-1">Leaf Switches</p>
                    <p class="text-3xl font-bold text-blue-600">{{ fabric_stats.leaf_count }}</p>
                </div>
                <div class="h-12 w-12 rounded-lg bg-blue-100 flex items-center justify-center">
                    <svg class="h-6 w-6 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 12h14M5 12a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v4a2 2 0 01-2 2M5 12a2 2 0 00-2 2v4a2 2 0 002 2h14a2 2 0 002-2v-4a2 2 0 00-2-2m-2-4h.01M17 16h.01"/>
                    </svg>
                </div>
            </div>
        </div>

        <div class="bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-all duration-300">
            <div class="flex items-center justify-between">
                <div>
                    <p class="text-sm font-medium text-gray-600 mb-1">EPGs</p>
                    <p class="text-3xl font-bold text-purple-600">{{ fabric_stats.epg_count }}</p>
                </div>
                <div class="h-12 w-12 rounded-lg bg-purple-100 flex items-center justify-center">
                    <svg class="h-6 w-6 text-purple-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"/>
                    </svg>
                </div>
            </div>
        </div>

        <div class="bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-all duration-300">
            <div class="flex items-center justify-between">
                <div>
                    <p class="text-sm font-medium text-gray-600 mb-1">Total Objects</p>
                    <p class="text-3xl font-bold text-orange-600">{{ fabric_stats.total_objects }}</p>
                </div>
                <div class="h-12 w-12 rounded-lg bg-orange-100 flex items-center justify-center">
                    <svg class="h-6 w-6 text-orange-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"/>
                    </svg>
                </div>
            </div>
        </div>
    </div>

    <!-- Secondary Stats -->
    <div class="grid grid-cols-2 md:grid-cols-3 gap-4">
        <div class="bg-gradient-to-br from-gray-50 to-gray-100 rounded-lg shadow p-4">
            <p class="text-xs font-medium text-gray-600 mb-1">Bridge Domains</p>
            <p class="text-2xl font-bold text-gray-900">{{ fabric_stats.bd_count }}</p>
        </div>
        <div class="bg-gradient-to-br from-gray-50 to-gray-100 rounded-lg shadow p-4">
            <p class="text-xs font-medium text-gray-600 mb-1">VRFs</p>
            <p class="text-2xl font-bold text-gray-900">{{ fabric_stats.vrf_count }}</p>
        </div>
        <div class="bg-gradient-to-br from-gray-50 to-gray-100 rounded-lg shadow p-4">
            <p class="text-xs font-medium text-gray-600 mb-1">Contracts</p>
            <p class="text-2xl font-bold text-gray-900">{{ fabric_stats.contract_count }}</p>
        </div>
    </div>

    <!-- Fabric Info -->
    <div class="mt-6 bg-white rounded-lg shadow p-4 border-l-4 border-primary-600">
        <div class="grid grid-cols-1 md:grid-cols-3 gap-4 text-sm">
            <div>
                <span class="font-medium text-gray-700">Datasets:</span>
                <span class="text-gray-900 ml-2">{{ fabric_stats.total_datasets }}</span>
            </div>
            <div>
                <span class="font-medium text-gray-700">Last Upload:</span>
                <span class="text-gray-900 ml-2">{{ fabric_stats.last_upload }}</span>
            </div>
            <div>
                <span class="font-medium text-gray-700">Fabric Created:</span>
                <span class="text-gray-900 ml-2">{{ fabric_stats.fabric_created }}</span>
            </div>
        </div>
    </div>
</div>
{% else %}
<!-- Welcome Message when no fabric selected -->
<div class="mb-12">
    <div class="bg-gradient-to-br from-primary-50 to-primary-100 rounded-2xl shadow-lg p-12 text-center">
        <div class="max-w-2xl mx-auto">
            <svg class="h-16 w-16 text-primary-600 mx-auto mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"/>
            </svg>
            <h2 class="text-3xl font-bold text-gray-900 mb-3">Welcome to ACI Migrator</h2>
            <p class="text-lg text-gray-700 mb-6">
                Professional ACI Migration Analysis Tool - Get started by selecting or creating a fabric from the Fabric Manager in the sidebar.
            </p>
            <button onclick="toggleFabricManager()" class="inline-flex items-center px-6 py-3 rounded-lg bg-primary-600 text-white font-semibold shadow-lg hover:bg-primary-700 transition-colors">
                <svg class="h-5 w-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"/>
                </svg>
                Create or Select Fabric
            </button>
        </div>
    </div>
</div>
{% endif %}

<!-- Mode Selection Cards -->
<div class="mb-12">
    <h2 class="text-2xl font-bold text-gray-900 mb-6 flex items-center">
        <span class="h-1 w-8 bg-primary-600 mr-4 rounded-full"></span>
        Select Your Mode
    </h2>
    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">

        <!-- EVPN/VXLAN Migration Mode -->
        <div class="relative group">
            <div class="absolute -inset-0.5 bg-gradient-to-r from-purple-600 to-pink-600 rounded-2xl opacity-0 group-hover:opacity-100 blur transition duration-300 {% if mode == 'evpn' %}opacity-75{% endif %}"></div>
            <div class="relative bg-white rounded-2xl shadow-lg p-8 hover:shadow-xl transition-all duration-300 {% if mode == 'evpn' %}ring-2 ring-purple-600{% endif %}">
                <div class="flex items-center justify-between mb-4">
                    <div class="h-12 w-12 rounded-xl bg-purple-100 flex items-center justify-center transform group-hover:rotate-12 transition-transform duration-300">
                        <svg class="h-7 w-7 text-purple-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"/>
                        </svg>
                    </div>
                    {% if mode == 'evpn' %}
                    <span class="inline-flex items-center rounded-full bg-purple-100 px-3 py-1 text-xs font-medium text-purple-700 animate-pulse">
                        Active
                    </span>
                    {% endif %}
                </div>
                <h3 class="text-xl font-semibold text-gray-900 mb-3">EVPN/VXLAN Migration</h3>
                <p class="text-gray-600 mb-6 leading-relaxed">
                    Complete ACI migration analysis with VPC translation, contract-to-ACL conversion, L3Out documentation, and EVPN/VXLAN configuration generation.
                </p>
                {% if mode != 'evpn' %}
                <a href="{{ url_for('set_mode', mode='evpn') }}" class="inline-flex items-center justify-center w-full rounded-lg bg-purple-600 px-4 py-2.5 text-sm font-semibold text-white shadow-sm hover:bg-purple-700 transition-colors duration-200">
                    Switch to EVPN
                </a>
                {% else %}
                <div class="flex items-center justify-center text-sm font-medium text-purple-600">
                    <svg class="h-5 w-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/>
                    </svg>
                    Currently Active
                </div>
                {% endif %}
            </div>
        </div>

        <!-- Onboard Mode -->
        <div class="relative group">
            <div class="absolute -inset-0.5 bg-gradient-to-r from-green-600 to-emerald-600 rounded-2xl opacity-0 group-hover:opacity-100 blur transition duration-300 {% if mode == 'onboard' %}opacity-75{% endif %}"></div>
            <div class="relative bg-white rounded-2xl shadow-lg p-8 hover:shadow-xl transition-all duration-300 {% if mode == 'onboard' %}ring-2 ring-green-600{% endif %}">
                <div class="flex items-center justify-between mb-4">
                    <div class="h-12 w-12 rounded-xl bg-green-100 flex items-center justify-center transform group-hover:rotate-12 transition-transform duration-300">
                        <svg class="h-7 w-7 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"/>
                        </svg>
                    </div>
                    {% if mode == 'onboard' %}
                    <span class="inline-flex items-center rounded-full bg-green-100 px-3 py-1 text-xs font-medium text-green-700 animate-pulse">
                        Active
                    </span>
                    {% endif %}
                </div>
                <h3 class="text-xl font-semibold text-gray-900 mb-3">Onboard Mode</h3>
                <p class="text-gray-600 mb-6 leading-relaxed">
                    Plan new FEX/leaf deployments with policy scaffolding, capacity planning, and automated configuration generation.
                </p>
                {% if mode != 'onboard' %}
                <a href="{{ url_for('set_mode', mode='onboard') }}" class="inline-flex items-center justify-center w-full rounded-lg bg-green-600 px-4 py-2.5 text-sm font-semibold text-white shadow-sm hover:bg-green-700 transition-colors duration-200">
                    Switch to Onboard
                </a>
                {% else %}
                <div class="flex items-center justify-center text-sm font-medium text-green-600">
                    <svg class="h-5 w-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/>
                    </svg>
                    Currently Active
                </div>
                {% endif %}
            </div>
        </div>
    </div>
</div>

<!-- Version Footer -->
<div class="mt-12 text-center py-6 border-t border-gray-200">
    <p class="text-sm text-gray-500 font-medium">
        ACI Migrator v1.01 | &copy; 2024-2025 | Professional ACI Migration Tool
    </p>
</div>

<!-- Create Fabric Modal -->
<div id="create-fabric-dialog" class="fixed inset-0 bg-gray-600 bg-opacity-75 flex items-center justify-center z-50 hidden transition-opacity duration-300">
    <div class="bg-white rounded-2xl shadow-2xl p-8 max-w-md w-full mx-4 transform transition-all duration-300">
        <div class="flex items-center justify-between mb-6">
            <h3 class="text-2xl font-bold text-gray-900">Create New Fabric</h3>
            <button onclick="hideCreateFabricDialog()" class="text-gray-400 hover:text-gray-600 transition-colors">
                <svg class="h-6 w-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
                </svg>
            </button>
        </div>
        <form onsubmit="createFabric(event)" class="space-y-6">
            <div>
                <label for="fabric-name" class="block text-sm font-medium text-gray-700 mb-2">Fabric Name</label>
                <input type="text" id="fabric-name" required
                    class="block w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-primary-600 focus:border-transparent transition-all duration-200"
                    placeholder="e.g., production-dc1">
            </div>
            <div class="flex gap-3">
                <button type="submit" class="flex-1 inline-flex items-center justify-center px-4 py-3 rounded-lg bg-primary-600 text-white text-sm font-semibold hover:bg-primary-700 shadow-lg hover:shadow-xl transition-all duration-200">
                    <svg class="h-5 w-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/>
                    </svg>
                    Create Fabric
                </button>
                <button type="button" onclick="hideCreateFabricDialog()" class="px-6 py-3 rounded-lg bg-gray-200 text-gray-700 text-sm font-semibold hover:bg-gray-300 transition-colors duration-200">
                    Cancel
                </button>
            </div>
        </form>
    </div>
</div>

<style>
/* Custom Animations */
@keyframes fadeIn {
    from { opacity: 0; transform: translateY(20px); }
    to { opacity: 1; transform: translateY(0); }
}

@keyframes slideIn {
    from { opacity: 0; transform: translateX(-20px); }
    to { opacity: 1; transform: translateX(0); }
}

.animate-fade-in {
    animation: fadeIn 0.8s ease-out;
}

.animate-fade-in-delay {
    animation: fadeIn 0.8s ease-out 0.2s both;
}

.animate-fade-in-delay-2 {
    animation: fadeIn 0.8s ease-out 0.4s both;
}

.animate-slide-in {
    animation: slideIn 0.5s ease-out both;
}

.animate-pulse-slow {
    animation: pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite;
}

.animate-bounce-slow {
    animation: bounce 2s infinite;
}

.animate-spin-slow {
    animation: spin 6s linear infinite;
}

@keyframes pulse {
    0%, 100% { opacity: 1; }
    50% { opacity: .7; }
}

@keyframes bounce {
    0%, 100% {
        transform: translateY(0);
        animation-timing-function: cubic-bezier(0, 0, 0.2, 1);
    }
    50% {
        transform: translateY(-10px);
        animation-timing-function: cubic-bezier(0.8, 0, 1, 1);
    }
}

@keyframes spin {
    from { transform: rotate(0deg); }
    to { transform: rotate(360deg); }
}
</style>

{% endblock %}

{% block scripts %}
<script>
// Network Topology Animation
const canvas = document.getElementById('network-canvas');
const ctx = canvas.getContext('2d');

function resizeCanvas() {
    canvas.width = canvas.offsetWidth;
    canvas.height = canvas.offsetHeight;
}
resizeCanvas();
window.addEventListener('resize', resizeCanvas);

// Network nodes
class Node {
    constructor(x, y, type) {
        this.x = x;
        this.y = y;
        this.type = type;
        this.radius = type === 'core' ? 8 : 5;
        this.vx = (Math.random() - 0.5) * 0.5;
        this.vy = (Math.random() - 0.5) * 0.5;
    }

    update() {
        this.x += this.vx;
        this.y += this.vy;

        // Bounce off edges
        if (this.x < this.radius || this.x > canvas.width - this.radius) this.vx *= -1;
        if (this.y < this.radius || this.y > canvas.height - this.radius) this.vy *= -1;
    }

    draw() {
        ctx.beginPath();
        ctx.arc(this.x, this.y, this.radius, 0, Math.PI * 2);
        ctx.fillStyle = this.type === 'core' ? 'rgba(255, 255, 255, 0.9)' : 'rgba(255, 255, 255, 0.6)';
        ctx.fill();

        // Glow effect
        ctx.shadowBlur = 10;
        ctx.shadowColor = 'rgba(255, 255, 255, 0.5)';
        ctx.fill();
        ctx.shadowBlur = 0;
    }
}

// Create network nodes
const nodes = [];
const coreNodes = 4;
const edgeNodes = 20;

// Core nodes (larger, center-focused)
for (let i = 0; i < coreNodes; i++) {
    const angle = (i / coreNodes) * Math.PI * 2;
    const radius = Math.min(canvas.width, canvas.height) * 0.2;
    nodes.push(new Node(
        canvas.width / 2 + Math.cos(angle) * radius,
        canvas.height / 2 + Math.sin(angle) * radius,
        'core'
    ));
}

// Edge nodes (smaller, distributed)
for (let i = 0; i < edgeNodes; i++) {
    nodes.push(new Node(
        Math.random() * canvas.width,
        Math.random() * canvas.height,
        'edge'
    ));
}

// Particle for data flow
class Particle {
    constructor(start, end) {
        this.start = start;
        this.end = end;
        this.progress = 0;
        this.speed = 0.01 + Math.random() * 0.02;
    }

    update() {
        this.progress += this.speed;
        if (this.progress > 1) this.progress = 0;
    }

    draw() {
        const x = this.start.x + (this.end.x - this.start.x) * this.progress;
        const y = this.start.y + (this.end.y - this.start.y) * this.progress;

        ctx.beginPath();
        ctx.arc(x, y, 2, 0, Math.PI * 2);
        ctx.fillStyle = 'rgba(255, 255, 255, 0.8)';
        ctx.fill();

        // Trail
        ctx.shadowBlur = 5;
        ctx.shadowColor = 'rgba(255, 255, 255, 0.5)';
        ctx.fill();
        ctx.shadowBlur = 0;
    }
}

// Create particles for data flow
const particles = [];
for (let i = 0; i < coreNodes; i++) {
    for (let j = 0; j < 3; j++) {
        const randomEdge = nodes[coreNodes + Math.floor(Math.random() * edgeNodes)];
        particles.push(new Particle(nodes[i], randomEdge));
    }
}

// Animation loop
function animate() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);

    // Draw connections
    ctx.strokeStyle = 'rgba(255, 255, 255, 0.1)';
    ctx.lineWidth = 1;
    for (let i = 0; i < nodes.length; i++) {
        for (let j = i + 1; j < nodes.length; j++) {
            const dx = nodes[i].x - nodes[j].x;
            const dy = nodes[i].y - nodes[j].y;
            const distance = Math.sqrt(dx * dx + dy * dy);

            if (distance < 150) {
                ctx.beginPath();
                ctx.moveTo(nodes[i].x, nodes[i].y);
                ctx.lineTo(nodes[j].x, nodes[j].y);
                ctx.globalAlpha = 1 - (distance / 150);
                ctx.stroke();
                ctx.globalAlpha = 1;
            }
        }
    }

    // Update and draw particles
    particles.forEach(particle => {
        particle.update();
        particle.draw();
    });

    // Update and draw nodes
    nodes.forEach(node => {
        node.update();
        node.draw();
    });

    requestAnimationFrame(animate);
}
animate();

// Fabric Management Functions
function showCreateFabricDialog() {
    const dialog = document.getElementById('create-fabric-dialog');
    dialog.classList.remove('hidden');
    setTimeout(() => dialog.classList.add('opacity-100'), 10);
}

function hideCreateFabricDialog() {
    const dialog = document.getElementById('create-fabric-dialog');
    dialog.classList.add('hidden');
    document.getElementById('fabric-name').value = '';
}

function createFabric(event) {
    event.preventDefault();
    const name = document.getElementById('fabric-name').value;

    fetch('/fabrics', {
        method: 'POST',
        headers: {'Content-Type': 'application/json'},
        body: JSON.stringify({name: name})
    })
    .then(response => response.json())
    .then(data => {
        if (data.success) {
            showToast('Fabric created successfully!', 'success');
            setTimeout(() => location.reload(), 1000);
        } else {
            showToast(data.error || 'Failed to create fabric', 'error');
        }
    })
    .catch(error => {
        showToast('Error creating fabric', 'error');
        console.error('Error:', error);
    });
}

function selectFabric(name) {
    fetch(`/fabrics/${name}/select`, {method: 'POST'})
        .then(response => response.json())
        .then(data => {
            showToast(`Fabric "${name}" selected`, 'success');
            setTimeout(() => location.reload(), 1000);
        })
        .catch(error => {
            showToast('Error selecting fabric', 'error');
            console.error('Error:', error);
        });
}

function deleteFabric(name) {
    if (confirm(`Are you sure you want to delete fabric "${name}"? This action cannot be undone.`)) {
        fetch(`/fabrics/${name}`, {method: 'DELETE'})
            .then(response => response.json())
            .then(data => {
                showToast('Fabric deleted successfully', 'success');
                setTimeout(() => location.reload(), 1000);
            })
            .catch(error => {
                showToast('Error deleting fabric', 'error');
                console.error('Error:', error);
            });
    }
}
</script>
{% endblock %}
